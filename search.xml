<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[使用Gumbel trick来模拟离散分布的抽样]]></title>
    <url>%2F2018%2F06%2F26%2FDVAE%2F</url>
    <content type="text"><![CDATA[The Gumbel soft-max Gumbel trick有两个用途，一个用途是是用来对离散分布进行采样，这是一种重参数化的技巧，另外一个用途是用于估计normalizing partition function，也就是分布的归一化项。下面是一个离散分布采样的例子： 1530005723510 如上图例子，首先有\(\log \alpha_1\) 然后加上一个gumbel noise G1，最后取最大值，就是我们要的样本。这个过程可以形式化为，设X是离散随机分布\(P(X=k)\propto \alpha_k\) , 设\(\{G_k\}_{k\le K}\)是独立同分布的Gumbel 分布的随机变量。于是： \[ X=\arg\max_k(\log(\alpha_k)+G_k) \] 为了让这个argmax可求导，于是就把中间的argmax换成softmax。我们从这个图底下的“+”号可以看到，这是一种重参数的方法，通过加一个随机的，固定分布的噪声，从而实现采样。这个噪声的采样方法可以通过Inverse transform sampling方法直接从均匀分布进行采样，即 \[ G_i\sim -log(-log(\text{Uniform}(0,1))) \] 目前一篇论文“Categorical Reparametrization with Gumbel-Softmax”正是用了这个方法去对离散的隐状态进行采样，从而使得里面的参数可导。 Gumbel distribution 要想知道他为什么有这样的效果，我们需要先介绍一下gumbel distribution 这一个分布，可以把看作是一个关于“最大值”的概率的分布，比如你想预测明年河流最大的水位是多少，那么你就可以用gumbel分布去预测，这个分布会告诉你每一个值作为“最大值“的概率是多少。一个很简单的推广，如果你对这个分布取个负号的话，你就可以去预测最小值。 他的概率密度函数： \[ f(x) = {\frac {1}{\beta }}e^{-(z+e^{-z})} \] 其中\(z=\frac{x-\mu}{\beta}\) 他的分布函数： \[ F(x)= e^{-e^{-(x-\mu )/\beta }} \] 均值：\(E(X)=\mu+c\beta\),方差：$ {}^{2}\(,其中\)c$是一个常数( Euler–Mascheroni constant ) Gumbel trick 我们先考虑一下，求解normalizing partition function. 就是分布的归一化项的问题。 定义一个非标准化的mass function \(\tilde{p} : \mathcal{X} \to [0, \infty)\) 这个分布是没有标准化的，也就是他加起来不等于1.而它的标准化项normalizing partition function为\(Z:= \sum_{x \in \mathcal{X}} \tilde{p}(x)\),接来下我们定义\(\phi(x)=\ln \tilde{p}(x)\) 对其概率密度取对数。 于是可以证明： \[ \max_{x \in \mathcal{X}} \{ \phi(x) + \gamma(x) \} \sim \text{Gumbel}(-c + \ln Z) \] 其中\(\gamma \sim \text{Gumbel}(-c)\)。这就意味，只要我们从\(\max_{x \in \mathcal{X}} \{ \phi(x) + \gamma(x) \}\)中采集足够多的样本，我们就能够知道Z的取值(通过求期望得到)。 具体的推导过程如下： 令\(T=\max_{x\in \mathcal{X}} \{\phi (x)+\gamma (x)\}\)，于是他的概率分布等于 \[ \begin{aligned} P(T&lt; t) &amp; =P(\max_{x\in \mathcal{X}} \{\phi (x)+\gamma (x)\}&lt; t)\\ &amp; =\prod _{x\in \mathcal{X}} P(\phi (x)+\gamma (x)&lt; t)( 最大值小于t等价于每一项都小于t)\\ &amp; =\prod _{x\in \mathcal{X}} P(\gamma (x)&lt; t-\phi (x))\\ &amp; =\prod _{x\in \mathcal{X}} F_{Gumbel} (t-\phi (x))\\ &amp; =\exp\left( -\sum _{x\in \mathcal{X}}\exp( -(t-\phi (x)+c))\right)\\ &amp; =\exp( -Z\exp( -(t+c)))\\ &amp; =\exp( -\exp( -(t+c-\ln Z)))\\ &amp; \Rightarrow F(t)\text{ where } t\sim \text{Gumbel} (-c+\ln Z) \end{aligned} \] 我们发现这个max的函数，最后是服从\(\text{Gumbel} (-c+\ln Z)\)分布的，也就是说，我们只要求这个分布的期望：\(E=-c+\ln Z+c=\ln Z\)就可以把\(\ln Z\)还原出来！这个例子也从侧面说明了Gumbel分布用于表示最大值的概率分布的优势所在。 如果我们的p是已经标准化的p，那么Z=0，于是，这个分布只与\(\gamma(x)\)有关。实际上，当\(\gamma \sim Gumbel(0,1)\)，而p是多项式分布的时候就是我们模拟多项式分布进行采样时所服从的分布！那么为什么这个Gumbel 分布能够模拟多项式分布？ 我们来考虑一个问题，对于公式1，多项式一共有K个类别。那么第k个类别恰好是最大的概率是多少？ 令\(\displaystyle z_{k} =\log \alpha _{k} +G_{k}\)要求解这个问题，我们要先求出\(z_k\)是最大的概率多少？然后再对z积分，从而求出第k个是最大的概率。 \[ \begin{aligned} \Pr (\log \alpha _{k} +G_{k} &gt;\max_{i\neq k}\log \alpha _{i} +G_{i} ) &amp; =\Pr (\max_{i\neq k}\log \alpha _{i} +G_{i} &lt; \log \alpha _{k} +G_{k} )\\ &amp; =\prod _{i\neq k}\Pr (\log \alpha _{i} +G_{i} &lt; \log \alpha _{k} +G_{k} )\\ &amp; =\prod _{i\neq k}\Pr (G_{i} &lt; \log \alpha _{k} +G_{k} -\log \alpha _{i} )\\ &amp; =\prod _{i\neq k} F(\log \alpha _{k} +G_{k} -\log \alpha _{i})\\ &amp; =\prod _{i\neq k}\exp\{-\exp\{-(\log \alpha _{k} +G_{k} -\log \alpha _{i})\}\} \end{aligned} \] 现在我们有了\(\displaystyle z_{k}\)是最大的那个概率值，现在我们想知道第k个元素是最大的概率值是多少，因此，我们需要对所有z的取值进行积分，从而得到第k个位置取值最大的概率。 \[ \begin{aligned} \Pr (\text{k is largest} \ |\ \{x_{k&#39;} \}) &amp; =\int \exp \{-(z_{k} -\log \alpha _{k} )-\exp \{-(z_{k} -\log \alpha _{k} )\}\} \prod _{i\neq k}\exp \{-\exp \{-(z_{k} -\log \alpha _{i} )\}\}\ \mathrm{d} z_{k}\\ &amp; =\int \exp \{-z_{k} +\log \alpha _{k} -\exp \{-z_{k} \}\sum ^{K}_{i=1}\exp \{\log \alpha _{i} \}\}\ \mathrm{d} z_{k}\\ &amp; =\frac{\exp \{\log \alpha _{k} \}}{\sum ^{K}_{i=1}\exp \{\log \alpha _{i} \}} \end{aligned} \] 这时候，奇迹来了，上面这条等式恰好是一个softmax的公式，也就是说，第k个位置最大的概率，恰好就是对离散概率分布的一个近似。而且一个有趣的性质是这里的\(\alpha_k\)是不需要归一化的，因为经过softmax之后他就自动归一化了！ 参考资料 http://irenechen.net/blog/2017/08/17/gumbel-trick.html https://www.youtube.com/watch?v=wVkLM2KKHp8 https://hips.seas.harvard.edu/blog/2013/04/06/the-gumbel-max-trick-for-discrete-distributions/]]></content>
  </entry>
  <entry>
    <title><![CDATA[芝加哥顶级写作教程：Style]]></title>
    <url>%2F2018%2F05%2F06%2FStyle%2F</url>
    <content type="text"><![CDATA[Style 为什么别人可以思考地比你深入，可以清晰地传达他的想法。其秘密在于，当你决定要把作品写得尽可能清晰时，那就相当于决定了要思考地更加的清晰。 当你要在书写你的作品时，你就是一名作家，而身为作家的责任就是，把内容写得尽可能清晰。 Have something to say, and say it as clearly as you can. That is the only secret of style. —- Matthew Arnold But once we decide to follow all the rules, we deprive ourselves of stylistic flexibility. And sooner or later, we will begin to impose those rules real or not on others. After all, what good is learning a rule if all we can do is obey it? —- Joseph M. Williams 一部实用的作品会告诉你规则，而一部伟大的作品将会告诉你规则的起源。 写作是一件很灵活的事情，如果你处处被规则约束着，那规则还有什么意义呢。然而，正如写作是灵活的，你可以写得很差，也可以写得很好，这里面一定有些规律在里面，而这正是本文将要告诉你的，我们称这些规律为原则，规则不能帮你写得更好，但原则可以。 注：本文的内容大部分来源于《Style: Toward clarity and grace》和《Style: Lessons in clarity and grace》的整理。 Clarity(清晰) 在这一节，你会学习到如何将一句话写的清晰，同时你还会学一个新词，叫nominalization，这会帮助你判断这句话到底写得是否清晰。 先介绍两个原则： - character应该放在主语的位置上 (The subjects of the sentences name the cast of characters.) 伴随character的动词一定要是character的actions (The verbs that go with those subjects name the crucial actions those characters are part of.) 根据这两个原则，我们可以修复一系列Clarity的问题：找到一个句子的character和action然后分别放在主语和动词上。 举个简单的例子： We discussed the problem. The problem was the topic of our discussion. 在这两个句子里，we是character, discussed是action，the problem是宾语。 第一个句子非常完美地将character放在了主语的位置上，将action放在了动词的位置上。但是第二句话，主语是the problem，动词是was，明显不满足上面的原则，所以第二句话显得很难懂。 Nominalization 那么，这种难懂的句子是怎么写出来的呢？仔细看下句子的动词发现，discussed变成了discussion，也就是动词变成了一个名词，我们称一些动词或形容词，变为名词的单词为Nominalization: 1525162067947 再看一个例子，这是一个写得很清晰的话： I SUGGEST that we DISCUSS the issue CAREFULLY. 但是如果我们将里面的动词，形容词都变成Nominalization,再用这些词来改写这个句子就会变成： suggest-&gt;suggestion discuss-&gt;discussion carefully-&gt;care My suggestion is that our discussion of the issue be done with care. 经过变化，character没有放在主语的位置上,actions也没有放在动词上，句子就变得很难懂了。其实除了Nominalization以外，这个难懂的句子还有一个规律，那就是这里面的动词，都是一些无意义或者很抽象的动词，比如这里的is, be done，另外这些nominalization的词通常都会以the xxx of 的形式出现， 可以多看几个例子： The police conducted an investigation into the matter. The police investigated the matter. The committee has no expectation that it will meet the deadline. The committee does not expect to meet the deadline. There was considerable erosion of the land from the floods. The floods considerably eroded the land. Useful Nominalization 但是以下几种情况，Nominalization是很有用的： 1.当他链接了上一个句子时: These arguments all depend on a single unproven claim. This decision can lead to costly consequences. 2.(they name what would be the object of a verb): I do not know what she INTENDS. I do not know her intentions. 3.当nominalization可以替换掉the fact that时: The fact that I denied what he accused me of impressed the jury. My denial of his accusations impressed the jury. 4.当它指代一个约定成俗的概念时: Few issues have so divided Americans as abortion on demand. 小心 Noun+Noun+Noun 要小心那些由多个名词组成的长名词： Early childhood thought disorder misdiagnosis often occurs because of unfamiliarity with recent research literature describing such conditions. This paper reviews seven recent studies of particular relevance to preteen hyperactivity diagnosis and to treatment modalities involving medication maintenance level evaluation procedures. 除非这些名词是约定俗成的，不然我们还是尽量避免它。特别是，当这种超长名词中有nominalization出现就更应该修改了。它的修改方法就是找到句子里面的nominalization将变回动词或形容词。 比如Early childhood thought disorder(n.) misdiagnosis(n.) 改为：misdiagnose(v.) disordered(adj.) thought in early childhood Cohesion(衔接) 在上一节，我们介绍了如何清晰地写出一句话，那么在这一节就是教你如何清晰地写出一段话。即使你每一句话都很清晰，但是放在一起，如果你每句话之间都是支离破碎的，那么这段话是很难看得懂的。衔接其实不仅体现在一段话中，他甚至还体现在段与段之间，section与section之间： Writing Science Fig. 10.2 Cohesion的秘密在于，每句话的开头，一定是旧的，已知的信息，这里的旧知识可以是前文提过的，也可以是一些常识性的东西，而每句话的结尾则是新的，读者不知道的信息。 对比下这两句话，看看flow是怎么形成的： Molecules are comprised of covalently bonded atoms. Molecules’ reactions are controlled by the strength of the bonds. Molecules, however, sometimes react slower than bond strength would predict. Molecules are comprised of covalently bonded atoms. Bond strength controls a molecule’s reactions. Sometimes however, those reactions are slower than bond strength would predict. 1525178399967 但是，难道一个段落中，每一句话都衔接地很好，那么这段话就算写得好吗？每句话衔接地好，我们只能说是cohesion但不能说他是coherence，整体而言，似乎还缺了些什么。下面就是一个每句话都衔接地很好的例子: Sayner, Wisconsin, is the snowmobile capital of the world. The buzzing of snowmobile engines fills the air, and their tank-like tracks crisscross the snow. The snow reminds me of Mom’s mashed potatoes, covered with furrows I would draw with my fork. Her mashed potatoes usually make me sick—that’s why I play with them. I like to make a hole in the middle of the potatoes and fill it with melted butter. This behavior has been the subject of long chats between me and my analyst. 仔细看可以发现，每句话开头都是前文提到过的，似乎衔接得很好，但是看完之后却完全不知道他想说什么，甚至忍不住在心里吐槽：What’s the point? 实际上，这段话至少存在3个问题： 句子中的主语，其实是毫无关系的（没有相关的topic(话题)） 句子之间没有一个统一的主题（themes）或观点（ideas） 段落中缺少一个介绍这个段落的句子（Point） 由这3个问题，针对Coherent我们可以总结出5个原则： Principle 1: A cohesive paragraph has consistent topic strings. Principle 2: A cohesive paragraph has another set of strings running through it that we will call thematic strings. Principle 3: A cohesive paragraph introduces new topic and thematic strings in a predictable location: at the end of the sentence(s) that introduce the paragraph. Principle 4: A coherent paragraph will usually have a single sentence that clearly articulates its point. Principle 5: A coherent paragraph will typically locate that point sentence in one of two places. 下面将针对这5条规则讲解如何写好一个段落。 Topics Principle 1: A cohesive paragraph has consistent topic strings. 针对第一个问题，我们先介绍一个概念topic—-话题。话题，是关于这个句子到底说什么的一个词或短语。他们通常会出现在主语中，但有时候并不一定是句子的主语，比如下面这些句子。 It is impossible for your claim to be proved. In regard to this question, I believe more research is needed. It is likely that our proposal will be accepted. 接下来，我们看一下两个段落，当你的每个句子的topic都是不相关的，或者都是相关的会怎样，黑体表示当前句子的topic： In this paragraph, boldface indicate topics. Particular ideas toward the beginning of each clause define what a passage is centrally “about” for a reader, so a sense of coherence crucially depends on topics. Cumulatively, the thematic signposts that are provided by these ideas should focus the reader’s attention toward a well-defined and limited set of connected a paragraph from a cumulatively coherent Moving through view is made possible by a sequence of topics that seem to constitute this coherent sequence of topicalized idea. A seeming absence of context for each sentence is one consequence of making random shifts in topics. Feelings of dislocation, disorientation, and lack of focus will occur when that happens. The seeming coherence of whole sections will turn on a reader’s point of view as a result of topic announcement. 黑体的部分他们看起来都是毫不相关的，如果我们把这段句子改一下： In this paragraph, I have boldfaced the topics of every clause. Topics are crucial for a reader because they focus the reader’s attention on a particular idea toward the beginning of every clause . Topics thereby notify a reader what a clause is “about”. Topics thereby crucially determine whether the reader will feel a passage is coherent. Cumulatively, through a series of sentences, these topicalized ideas provide thematic signposts that focus the reader’s attention on a well-defined set of connected ideas. If a sequence of topics seems coherent, that consistent sequence will move the reader through a paragraph from a cumulatively coherent point of view. But if through that paragraph topics shift randomly, then the reader has to begin each sentence out of context, from no coherent point of view. When that happens, the reader will feel dislocated, disoriented, out of focus. Whatever the writer announces as a topic, then, will fix the reader’s point of view, not just toward the rest of the sentence, but toward whole sections. 对比起第一段，我们发现几乎所有句子都是有关topic，reader的，这段话就让人感觉更加的coherence。 最后我们可以总结出两个原则： 把你曾经说过的观点或读者熟悉或之前提到过的事物放在句子的主语或话题中。 (Put in the subject/topic of your sentences ideas that you have already mentioned, or ideas that are · so familiar to your reader that if you state them at the beginning of a sentence, you will not surprise anyone.) 让句子间的话题有连贯性。 (Among groups of related sentences, keep their topics consistent, if you can. They don’t have to be identical, but they should constitute a string that your readers will take to be focused.) 这两个原则会导致两个额外结果： 你会发现，你的主动与被动的使用数量都差不多，因为使用被动有助于你保证句子的cohesion 你会发现你会使用nominalizations来进行开头，因为这正是上一个句子的内容，而这也是nominalizations最重要的作用：总结回顾你提到过的东西。实际上nominalizations还适合用来结尾，使得句子到达高潮。 Metadiscourse 有的时候，为了增加衔接，我们会使用metadiscourse来衔接两个句子。metadiscourse是一个哲学上的词汇，他类似于讨论关于讨论的话题，用在写作上，就意味着writing about writing. 他通常用于“评论”自己，读者，及自身作品的内容，而且这些词是超越了原文的主题的： your thinking and act of writing: We/I will explain, show, argue, claim, deny, suggest, contrast, add, expand, summarize . . . your readers’ actions: consider now, as you recall, look at the next example . . . the logic and form of what you have written: first, second; to begin; therefore, however, consequently . . . 小结 上面介绍了要衔接，开头是旧信息，结尾是新信息。每句话的开头，肯定有以下几个元素是先于其他的话出现的（优先级1最优，直到4）： 为了与上一句话建立联系，开头可以选择使用过渡的metadiscourse: and, but, therefore, as a result: And therefore 为了让读者清楚接下来的话将会是什么可以用： fortunately, perhaps, allegedly, it is important to note, for the most part, under these circumstances, from a practical point of view, politically speaking 动作所发生的时间与地点：then, later, on May 23, in Europe. 最重要的是，我们要在开头给出这个句子的话题（topic）。 Stress 讲完如何开头，现在讲下如何结尾。 一个原则：把最重要，最“新”的信息放到结尾处，我们称这样的一个结尾为：Stress. Global warming could raise sea levels to a point where much of the world’s low-lying coastal areas would disappear, according to most atmospheric scientists. ✓ According to most atmospheric scientists, global warming could raise sea levels to a point where much of the world’s low-lying coastal areas would disappear. 比较上面两个句子，显然第二个比第一个要好，因为他把最重要的信息放在了stress上，而第一个则是浪费了这句话的stress。 除了把重要信息放最后以外，还有一些技巧可以帮助强调： 1.使用There A few grammatical patterns add weight to the end of a sentence. There are a few grammatical patterns that add weight to the end of a sentence. 2.使用what This country needs a monetary policy that will end the violent fluctuations in money supply, unemployment, and inflation. What this country needs is a monetary policy that will end the violent fluctuations in money supply, unemployment, and inflation. 3.用It把尾巴无关紧要的提上来 That domestic oil prices must eventually rise to the level set by OPEC once seemed inevitable. It once seemed inevitable that domestic oil prices must eventually rise to the level set by OPEC. 4.it直接用于强调 In 1933 this country experienced a depression that almost wrecked our democratic system of government. It was in 1933 that this country experienced a depression that al? most wrecked our democratic system of government. 另外，涉及到一些专业名词的时候，最好把那些困难的概念放在stress处，这样没有基础的人才能看得懂。 Themes Principle 2: A cohesive paragraph has another set of strings running through it that we will call thematic strings. 接下来我们看一个topic一致的例子： 1525187075453 黑体是topic，他们都是关于researchers/physicians 和testing/diagnosis的。话题很一致，但是却没有考虑stress，如果我们能把每个句子中的一些“关键概念”都放到stress上，而且这些关键概念是贯穿整个段落的，则称他们为：Theme. 下面的修正段落，分别用黑体，斜体，大写表示3类主题: testing, mental states, new problem. 1525187322582 首先看topic，他们都是关于diagnosis， physicians的。与此同时，整个段落都是围绕着3个主题展开的，特别注意第一句话的stress处，他给出了整个段落的主题（斜体+大写） Point Principle 3: A cohesive paragraph introduces new topic and thematic strings in a predictable location: at the end of the sentence(s) that introduce the paragraph. Principle 4: A coherent paragraph will usually have a single sentence that clearly articulates its point. Principle 5: A coherent paragraph will typically locate that point sentence in one of two places. 原则3：在某些固定的位置中介绍新主题和新的主题词组。这些固定地方：句子的末尾，在段落，章节，或整个论文的开头。 主题词是有固定的位置的，如果放错地方，这段文字就会很让人迷惑，因为读者会误解你接下来的内容。看下面的段落。 Seven out of eight reigns of the Romanov line after Peter the Great were plagued by some sort of palace revolt or popular revolution. In 1722, Peter the Great passed a law of succession that terminated the principle of heredity. He proclaimed that the sovereign could appoint a successor in order to accompany his idea of achievement by merit. This resulted in many tsars not appointing a successor before dying. Even Peter the Great failed to choose someone before he died. Ivan VI was appointed by Czarina Anna,but was only two months old at his coronation in 1740. Elizabeth, daughter of Peter the Great, defeated Anna, and she ascended to the throne in 1741.Succession not dependent upon authority resulted in boyars’ regularly disputing who was to become sovereign. It was not until 1797 that Paul I codified the law of succession: male primogeniture. But Paul I was strangled by conspirators,one of whom was probably his son, Alexander I. 在这一段句子里面，根据主题应该会出现的位置，读者一般认为palace revolt or popular revolution 就是这一段的主题了，然而很遗憾，除了最后一段以外，根本就没说到反抗和革命。认真看下去，才发现这一段的主题应该是关于，继承，任命，动乱的。作者没有把主题放在正确的位置，违反了原则3。 再仔细思考一下，一段话的开头的结尾，似乎决定了整段话的走向，如果我们将上面例子的第一句话修改一下： After Peter the Great died, seven out of eight reigns of the Romanov line were plagued by turmoil over disputed succession to the throne. 那么这句话就是典型的topic sentence，它在stress处介绍了整个段落的内容。然而，其实更多情况下，我们需要写多个的句子来介绍整个段落的内容（只有一个句子的topic sentence是不够的）。为此，我们介绍一种更加普适性的划分方法。 Paragraph=Issue+Discussion 不管是段落还是章节还是整体，我们都可以将其划分为两个阶段： 一个简短的开头部分。在这一部分的末尾放着主题，该主题是下面的段落将要讨论的。（issue） 一个长的跟随的部分–剩余的段落。这个部分作者会进行详细论述（discussion） 事实上，issue+discussion 可以看做是subject+verb, topic+stress的推广。 问题诊断与修改：当你发现一个段落混乱且不集中的时候，可能有以下几个问题： 在issue的结束之处，你给出了一个主题，但是在discussion中没有讨论这个主题。比如上面的palace revolt or popular revolution的例子。 在issues处没有给出你要discussion的主题 issue的结束部分并不是你要讨论的主题 你在issue中介绍了主题，但没有放到结尾处。 接下来我们改一下上述的段落。 After Peter the Great died, seven out of-eight reigns of the Romanov line were plagued by turmoil over disputed succession to the throne. The problems began in 1722, when Peter the Great passed a law of succession that terminated the principle of heredity and required the sovereign to appoint a successor. But because many Tsars, including Peter, died before they appointed successors, those who sought to succeed to the throne had no authority by appointment, and so their succession was regularly disputed by the boyars and other interests. There was turmoil even when successors were appointed. In 1740, Ivan VI was adopted by Czarina Anna Ivanovna and appointed as her successor at age two months, but his succession was disputed by Elizabeth, daughter of Peter the Great, who defeated Anna and her forces before ascending to the throne in 1741. In 1797 Paul tried to eliminate these disputes by codifying a new law: succession on the basis of primogeniture in the male line. But turmoil continued. Paul was strangled by conspirators, one of whom was probably Alexander I, his son. 它作了几处修正：将issue结尾处改为了关于继承，任命，动乱的内容。将discussion的内容与修正后的issue联系起来，可以看到多处用到了turmoil这个词原本在原文是没有的。将discussion没有讨论的内容从issue处删除，比如palace revolt or popular revolution就删掉了。 Principle 4: A reader will feel that a paragraph is coherent if she can read a sentence that specifically articulates its point. 当你从一个段落到一个新段落，每个读者都希望能够找到这个新段落的中心思想，称为point，也可以称为主题句。接下来就是一个缺少point的例子： As you know, Abco is contemplating the possibility of entering into a cooperative venture with Janeway to develop an electronically controlled steering mechanism for our new line. Janeway has a long history of developing highly efficient hydraulic components including brake systems, frontend systems, and various types of stabilizing systems. We have found them entirely reliable and cost-effective. So far as I know, Janeway’s experience in developing electronic systems has primarily involved ignition and other engine components, not steering. The development of an electronic steering mechanism will depend on an innovative marriage of electronics and hydraulics.Edwards has recently marketed a hydraulic lift system that depends on electronic sensors to read terrain features and compensate for them. Their systems appear to have many of the features we will require in our steering mechanisms. 看完后其实你不知道他到底想要说什么，然后开始吐槽: what’s the point? 如果这时候他告诉你，point就是 Abco should not cooperate with Janeway in developing a new steering system because Edwards has more technical expertise. 这时你就有“豁然开朗”的感觉。我们之所以需要point是因为，读者不是作者，读者无法得知作者的意图，因为他没有与作者一样的经验，没有经历作者的人生，怎么可能知道作者在想什么。 所以Point是一个揭示段落中心大意的句子，应该放在一个重要的位置上，即issue结束处或discussion的结尾处： Principle 5: A reader will feel that a paragraph is coherent if he finds the POINT sentence in one of two predictable places in a paragraph: (1) at the end of its issue, or (2) at the end of its discussion; i.e., at the end of the paragraph (or section or whole document). POINTS in Issues 第一种情况，point在issues中。该情况下，point所在的位置应该是issue的结束处，而且issues不能太长，不然，读者很容易把靠前的句子当做point。 看一下这几个例子，都是issue+discussion的段落，黑体部分就是issue的point： Though most economists believe that business decisions are guided by a simple law of maximum profits, in fact they result from a vector of influences acting from many directions. When an advertiser selects a particular layout, for example, he depend snot only on sales expectations or possible profit but also on what the present fad is. He is concerned with what colleagues and competitors will think,beliefs about the actions of the FTC, concerns about Catholics or the American Legion, whether Chicanos or Italian-Americans will be offended, how the“silent majority” will react. He might even be worried about whether the wife or secretary of the decision maker will approve. Our main concern was to empirically test the theory that forms the background for this work. To a great extent, we have succeeded in showing our theory is valid. Chapter Two reports a study which shows that the rate of perceiving variations in length relates directly to the number of connectives in the base structure of the text. In chapter Three, we report a study that found that subjects perceive as variable units only what the theory claims is a unit. Another series of crucial studies is the comparison and contrast experiments reported in Chapter Three, which show that we do not distinguish complex concepts of different lengths as some current theories do. The United States is at present the world’s largest exporter of agricultural products. Its agricultural net balance of payments in recent years has exceeded 10 billion a year. As rising costs of imported petroleum and other goods have increased the U.S. trade deficit, this agricultural surplus has taken on great financial importance in both the domestic and international markets. First, agricultural exports maintain profitable market prices for the American farmer and bolster the national economy by providing over one million jobs. The income from farm exports alone is used to purchase about 9 billion worth of domestic farm machinery and equipment annually. Exports of U.S. agricultural products also reduce price-depressing surpluses. Without exports, the government would be subsidizing American farmers by more than $10 billion a year over the current rate. Finally, agricultural exports provide an entry to foreign markets that can be exploited by other industries. 上面的3个例子，point都在issue的结尾之处，那么point前面的句子的作用是什么？ 从前一段中过渡，给出一个general claim，然后在point中narrow it 先给一个初步的claim，然后在point的反驳 下面的例子，句子（1）是一个general的claim，然后在第二句是point给出一个更具体的claim。 We can put this abstract notion of issue in simpler terms. (2) Think of an issue as the overture to an opera, in which the composer announces the themes that he will repeat, modulate, combine, and develop in a variety of interesting ways. 而这个例子，第一句是一个观点，然后在第二句的point中反驳。 Most high school teachers think that good paragraphs must have a single topic sentence that introduces the paragraph. (2) But that is evidently not so because professional writers regularly introduce their paragraphs with two or more sentences. POINTS at the ends of discussions. 第二种情况，point放在discussion的最后面。通常来说，在你想先充分论证然后再给出你的claim时，point会放到段尾。但是更一般的是，你想用这个段落来统领全文，而这个段落里面的point就是你论文所不断解释，扩展的观点，而且这段话也是你介绍整个论文的一段话，那么point就应该放在段尾。 而这就涉及到一个Introductory Paragraphs的东西。看下面例子： Man’s fascination with that move under their own power and control is at least as old as recorded history.In Aristotle’s Greece, plays of several acts are said to have been performed entirely by automatic puppets driven by weights hung on twisted cords. Much later European royalties were enthralled by lifelike automata that could write,draw, and play musical instruments. In recent years most of the magical aura surrounding mechanical automata has been dispelled. Today automatic machines and industrial robots are used in factories throughout the world to perform tasks that are too hazardous, too onerous, too boring or simply too uneconomic for human beings to undertake. 分析首先第一句话，他成功引入了topics and themes，关于 history fascination machines move under their own power。在discussion处，作者扩充了themes and topics, 给出了具体的历史，机器，一直到现代的机器，然后最后一句话，给出了整段的point。这个段落里，issue包含了一切在discussion将要讨论的东西但point不在issue处。 小结 如果你的段落是中间的段落，那么point可以在issue结尾处，也可以在段落最后。 如果你的段落是整个section甚至是整个论文的Introductory Paragraphs，那么你的point一定要放在段落的最后。 POINTS in Whole Documents 最后一种情况，point放在整个文章的最后。这种情况在英语写作中是比较少出现的。如果要这样做，一个原则是，如果你要在全文的最后放一个point，那么，你一定至少要给读者提供一个anticipatory point. You have asked me to determine the matter of Abco’s potential liability for the plaintiff’s injuries claimed as a result of his climbing Abco’s scaffolding. To determine Abco’s potential liability we must analyze four factors. They are (1) did Abco construct the scaffolding negligently; (2) did Abco provide adequate assembly instructions; (3) did plaintiff assemble the scaffolding according to the instructions; and (4) did the plaintiff use the scaffolding in a manner prescribed in the instructions? 这段话讲的是讨论原告因为爬Abco的脚手架而受伤，Abco要付多少的责任。如果这是文档的最后1句话，那么这个是point，显然是不对的，因为他并没有回答关键问题：Abco 是否有罪？但如果这不是文档的最后一段话，那么这个issue的最后4句话可以认为是一个anticipatory point, 是一种minor point。 point放在最后，适用于以下几种情况： timidity or politeness，一般是你要说一个坏消息的时候，可以把结论放最后，不然放前面别人一看就不想看下去。然而其实很多人，不管是好还是坏消息都喜欢把point放前面。（比如你如果要说五一不应该放7天假，那你最好把这句话放到最后。。） discovery： 当你认为，推理point的过程与point一样重要时，可以把point放在最后。 convention： 如果是约定成俗的话，可以 注意在英语写作中，point很少会放到最后的。 Concision 这部分是教把话说得简明扼要，有6个原则： 删掉无意义的词 Delete words that mean little or nothing. 删掉重复的词 Delete words that repeat the meaning of other words. 删掉重复含义的词 Delete words implied by other words. 将短语替换成单词 Replace a phrase with a word. 否定换成肯定 Change negatives to affirmatives. 删掉无意义的形容词和副词 Delete useless adjectives and adverbs. 删掉无意义的词 这些无意义的词一般都是潜意识加上去的： Productivity actually depends on certain factors that basically involve psychology more than any particular technology. Productivity depends on psychology more than on technology. 删掉重复的词 full and complete, hope and trust, true and accurate, each and every, hopes and desires, first and foremost, any and all, basic and fundamental, various and sundry. 都是同义重复，可以删掉其中一个。 删掉重复含义的词 In my personal opinion, we must listen to and think over in a punctilious manner each and every suggestion that is offered to us. 首先观点肯定是personal的，砍掉。其次，任何叙述默认都是opinion，所以in my opinion砍掉。 listen to and think over =&gt; consider. in a punctilious manner=&gt; punctiliously =&gt;carefully. Suggestion本来就能包括offer的意味，is offered to us砍掉。 we must carefully consider every suggestion. 更多的例子： terrible tragedy, basic fundamentals, final outcome, various different, future plans, true facts, free gift, each individual, consensus of opinion 将短语替换成单词 As you carefully read what you have written to improve wording and catch errors of spelling and punctuation, the thing to do before anything else is to see whether you could use sequences of subjects and verbs instead of the same ideas expressed in nouns. carefully read what you have written =&gt; edit the thing to do before anything else =&gt; first use X instead of Y =&gt; replace nouns instead of verbs =&gt; nominalizations sequences of subjects and verbs =&gt; clauses 修正后 As you edit, first replace nominalizations with clauses. 短语尽可能用一个词代替，虽然很难有一个统一的规则，但你总能够找到一些能压缩的短语的，以下是一堆例子： img img img img img img img img img Not the Negative Don’t write in the negative. Write in the affirmative 上面两句话是一样的，我们应该用Write in the affirmative，因为这个句子显得更简洁，明白。尽量不要用否定句。一些可以替换的词： not many - few did not stay - left did not accept -rejected not the same -different not old enough -too young not clearly - unclearly not different -alike/similar did not remember - forgot not possible - impossible did not -failed to did not consider -ignored not able - unable does not have -lacks did not allow -prevented not certain - uncertain 将否定句修改为肯定句的例子： Disengagement of the gears is not possible without locking mechanism release. To disengage the gears, first release the locking mechanism. Payments should not be forwarded if there has not been due notification of this office. Before you forward any payment , pontificate this office. Except when applicants have submitted applications without appropriate documentation,benefits will not be denied. To receive benefits, submit appropriate documents. 一些可能会出现否定的词： verbs: preclude,prevent, lack, fail, doubt, reject, avoid; deny, refuse, exclude, contradict,prohibit, bar, etc. conjunctions: except, unless,provided, however; without, against, lacking, absent, but for. 如果你的句子满足not … unless的模式，一般都可以用下面的公式进行修改： X may not do Y unless/except/without doing Z. X may do Y only if X does Z. In order to do Y,X must do Z. metadiscourse 冗余 写任何东西都需要metadiscourse ，但如果太多的话就会造成冗余了。 比如，The last point I would like to make here is that in regard to men-women relationships, it is important to keep in mind that the greatest change shave probably occurred in the way men and women seem to be working next to one another. 黑体部分全都是废话，删掉之后： Men and women have changed their relationships most in the way they work together. Hedges and Emphatics 句子要写得简明的同时，还要写得准确，而hedges就是让句子变得更准确的词。 How successfully we walk the rhetorical line between seeming timidity and arrogance depends on how we manage phrases like a good deal. Hedge也是metadiscourse的一种，它是用于表达作者的信心的，写作要求准确，不能夸大事实，hedge就是这么一种描述信心的词。hedge常用的词： usually, often,sometimes, almost, virtually, possibly, perhaps, apparently, seemingly,in some ways, to a certain extent, sort of, somewhat, more or less, for the most part, for all intents and purposes, in some respects, in my opinion at least, may, might, can, could, seem, tend, try, attempt, seek, hope. 于是同时，还有一种用于强调的词。强调常用的词： as everyone knows,it is generally agreed that, it is quite true that, it’s clear that, it is obvious that, the fact is, as we can plainly see, literally, clearly,obviously, undoubtedly, certainly, of course, indeed, inevitably, very,invariably, always, key, central, crucial, basic, fundamental, major, cardinal,primary, principal, essential. 它们之间的平衡还是要靠各位自己把握了。 Length 一个作家不会写长句，那跟咸鱼有什么区别？ 有很多的书，都会给你一条建议，“不要写超过20个词的句子”，某种程度上，这确实可以避免一些由于不会写长句而造成的问题。 但是，长就一定不好吗？当然不是，会写长句的作者就像在钢琴上舞蹈的精灵，优雅而不失深刻，怎么把长句写好就像一门艺术，它将打开通往作家的大门。 看看下面的这一个句子，没错就是一个句子。 Now if nature should intermit her course and leave altogether, though it were but for a while, the observation of her own laws; if those principal and mother elements of the world, whereof all things in this lower world are made, should lose the qualities which now they have; if the frame of that heavenly arch erected over our heads should loosen and dissolve itself; if celestial spheres should forget their wonted motions,and by irregular volubility tum themselves any way as it might happen; if the prince of the lights of heaven, which now as a giant doth run his unwearied course, should, as it were through a languishing faintness, begin to stand and to rest himself; if the moon should wander from her beaten way, the times and seasons of the year blend themselves by disordered and confused mixture, the winds breathe out their last gasp, the clouds yield no rain, the earth be defeated of heavenly influence, the fruits of the earth pine away as children at the withered breasts of their mother no longer able to yield them relief–what would become of man himself, whom these things now do all serve? —-Thomas Hooker, Of the Laws of Ecclesiastical Polity, 1594 虽然很多单词不认识&gt;_&lt;，但是它的结构给人感觉非常清晰。那么到底如何写好长句？为什么有些句子读着读着有种透不过气来的感觉。 If in reading one of your long sentences you feel that you are about to run out of breath before you come to a place where you can pause to integrate all of its parts into a whole that communicates a single conceptual structure [breathe], you have found a sentence, like this one, that your readers would likely want you to revise. Or if your sentence, because of one interruption after another, seems to stop and start, your readers are, if they are typical, likely to judge that your sentence, as this one does, lurches from one part to the next. 针对长句的两个诊断的方法：1.大声的读长句，如果你读着读着发现喘不过气来，那么这就是需要修改的句子。2.一个句子，读起来感觉一直被打断的，那么也是要修改的句子。 总的来说一个长句写得不好可以由以下3个原因导致的： 主从句的主语要等很久才能遇到它的动词 （They have to wait too long to get to the verb in the main clause.） 动词之后要经过一段崎岖的次级从句。 （After the verb, they have to slog through a shapeless sprawl of tacked-on subordinate clauses.） 句子不停被打断。 （They are stopped by one interruption after another.） Long Openings 问题1：开头太长 Since most undergraduate students change their fields of study at least once during their college careers, many more than once, first-year students who are not certain about their program of studies should not load up their schedules to meet requirements for a particular program. 句子快读完了，才能到达这个句子主从句的动词should not load up 建议1：句子尽快到达从句，但是如果不得不用since，because等词开头，那就写得尽可能短。 First-year students SHOULD NOT LOAD UP their schedules with requirements for a particular program if they are not certain about the program of studies they want to pursue, because most CHANGE their major fields of study at least once during their college careers. 建议2：同时句子也应该尽快到达动词和宾语。避免过长的主语，和避免打断 subject-verb&amp;verb-object 如果主语过长（超过7,8个词），把主语的nominalization变成动词： × Abco Inc.’s understanding of the drivers of its profitability in the Asian market for small electronics helped it pursue opportunities in Africa. ✓ Abco Inc. was able to pursue opportunities in Africa because it understood what drove profitability in the Asian market for small electronics. Movement and Momentum 写一个句子，应该尽可能让他不要被“打断”，也就是要保证 subject-verb, verb-object这样的结构是连贯的： A semantic theory, if it is to represent in real-time terms on-line cognitive behavior must propose more neutrally plausible psychological processes than those described here. 这个句子一共被打断了3次，第一次在读完semantic theory的时候被if打断了，同时开始屏息，然后represent又被in real-time terms打断，此时气不打一处来，接下来到达semantic theory的动词 must propose 可以稍微喘息一下，但是紧跟着more neutrally plausible将动词propose给打断了，彻底断气。 这三处打断，分别打断了subject-verb，verb-object，verb-object。如果我们改写一下，这句话就顺畅了好多： If a semantic theory is to represent online cognitive behavior in real-time terms, it must propose psychological processes more neutrally plausible than those described here. 再看更多句子被打断的例子： The accountant has given as accurate a projection as any that could be provided. We are facing a more serious decision than what you described earlier . A close relationship to the one just discovered is the degree to which similar genetic material to that of related species can be modified by different DNA chains from the ones first selected by Adams and Walsh. Another course of action than the present one is necessary to accumulate sufficient capital to complete such projects as those you have described. 这里的打断都是这样的： as accurate . . . as any that could be provided more serious . . . than what close A close … to 我们可以通过将形容词放在名词之后来修正,这里的秘密在于，把名词放在前面，后面的内容变成一个从句，然后被打断的部分就接上了： The accountant has given a projection as accurate as any that could have been provided. We are facing a decision more serious than what you described earlier. A relationship close to the one just discovered is the degree to which genetic material similar to that of related species can be modified by DNA chains different from the ones first selected by Adams and Walsh. A course of action other than the present one is necessary to accumulate capital sufficient to complete projects such as those you have described. 可以总结一下，当你看到下面这些形容词就要小心了，因为他们很可能会打断你的flow，要把里面的名词，移到前面去： more … than, less … than, other …than, as … as, similar … to, equal … to, identical … to, same … as,different … from, such … as, separate … from, distant … from, related… to, close … to, next … to, difficult … to, easy … to, necessary …to. Coordination(排比) 另外一种写长句的技巧，就是用排比句： The Inventors of the United States decided that there would be no hereditary titles in God’s country. Although the Inventors were hostile to the idea of democracy and believed profoundly in the sacredness of property and the necessary dignity of those who owned it,they did not like the idea of king, duke, marquess, earl. 1525351075822 每个and都是一个并列的结构，从而形成排比句。 再欣赏一个排比句： For the aspiring artist, the minor, the unfinished, or even the botched work, may be an instructive model for how things should—and should not—be done. For the amateur spectator, such works are the daily fare which provide good, honest nourishment—and which can lead to appreciation of more refined, or deeper pleasures. —Eva Hoffman, “Minor Art Offers Special Pleasures” Resumptive Modifiers 接下来介绍三种modifier（修饰语）来帮助你写一个长句。先说下，modifier是什么。这是wiki的定义： &gt; In grammar, a modifier is an optional element in phrase structure or clause structure. A modifier is so called because it is said to modify (change the meaning of) another element in the structure, on which it is dependent. Typically the modifier can be removed without affecting the grammar of the sentence. For example, in the English sentence This is a red ball, the adjective red is a modifier, modifying the noun ball. Removal of the modifier would leave This is a ball, which is grammatically correct and equivalent in structure to the original sentence. modifier可以用于modify另一个元素的意义，但是去掉又不影响句子。比如This is a red ball. red就是modifier, 如果去掉red，This is a ball.句子还是完整的。 那么这里将要介绍的修饰语，就是通过用一个从句作为修饰语来修饰前面的句子从而达到写长句的目的，而这三种修饰语就是这个作为修饰语的从句应该怎么设计的问题。 在这里，Resumptive Modifiers，就是将一个普通的modifiers，根据前文，重复一个的词放在前面，使得这个从句modifiers就变得更友好，因为它显式地把要修饰的内容提炼了出来，对比以下两句话： For several years the Columbia Broadcasting System created and developed situation comedies that were the best that American TV had to offer, such as “The Mary Tyler Moore Show”and “All in the Family” that sparkled with wit and invention. For several years, the Columbia Broadcasting System created and developed situation comedies that were the best that American TV had to offer, comedies such as “The Mary Tyler Moore Show” and “All in the Family,” comedies that sparkled with wit and invention. 这个例子重复了前面的词：comedies 再看一个例子： It was American writers who found a voice that was both true and lyrical, true to the rhythms of the working man’s speech and lyrical in its celebration of his labor. 这里true和lyrical也是重复了之前的元素 Summative Modifiers 如果没有可以重复的元素，我们还可以自己总结一个元素，即Summative Modifiers。该技术可以修改非限定性定语从句，在which 前加一段小总结+that，从而让你能够把句子变长。同时这个技巧还能修复指代不清，产生歧义的问题。 In the last five years, European population growth has dropped to almost zero, which in years to come will have profound social implications. In the last five years, European population growth has dropped to almost zero, a demographic event that in years to come will have profound social implications. 再看一个例子： Scientists have finally unraveled the mysteries of the human gene, which may lead to the control of such dread diseases as cancer and birth defects. Scientists have finally unraveled the mysteries of the human gene, a discovery that may lead to the control of such dread diseases as cancer and birth defects. 接下来，试试运用上面的方法，来将短句，变成一段长句： In 1986, President Reagan proposed that federal and state employees voluntarily submit to blood and urine tests for drugs. The employees took the u.S. Government to court. They claimed that the order violated their Fourth Amendment rights. These rights protect us against unreasonable search and seizure. But without such programs of massive testing and mandatory treatment, drugs will continue to devastate our inner cities. They will also devastate suburbs and rural communities as well.At that point we will learn what it is like to live with drug addicts and with violent crime. It is a prospect that should frighten us all. In 1986, President Reagan proposed that federal and state employees voluntarily submit to blood and urine tests for drugs. The employees took the u.s. Government to court, claiming that the order violated their Fourth Amendment rights, rights that protect us against unreasonable search and seizure. But without such programs of massive testing and mandatory treatment, drugs will continue to devastate not only the inner cities but suburbs and rural communities as well. At that point, we will all realize what it is like to live not only with drug addicts but with violent crime, a prospect that should frighten us all. Free Modifiers free modifier中的“free”他比较“自由”，既可以在开头也可以在结尾。这个技巧是用V+ing或V+ed来引导后面的从句，常用V+ing，达到并列的作用。 Free modifiers resemble resumptive and summative modifiers, letting you extend the line of a sentence while avoiding a train of ungainly phrases and clauses. 也可以对比下面两段话： Socrates, who relentlessly questioned the very foundations of social and political behavior, forced his fellow citizens to examine the duty they owed to the laws of their gods and to the laws of their state and encouraged young people to question the authority of their elders while he maintained that he was only trying in his poor inadequate way to puzzle out the truth as best he could. Socrates relentlessly questioned the very foundations of social and political behavior, forcing his fellow citizens to examine the duty they owed to the laws of their gods and to the laws of their state, encouraging young people to question the authority of their elders, maintaining all the while that he was only trying in his poor inadequate way to puzzle out the truth as best he could. 另外也可以V+ed，使用被动形式 Leonardo da Vinci was a man of powerful intellect, driven by an insatiable curiosity and haunted by a vision of artistic expression. 除了放结尾，也可以放开头： Driven by an insatiable curiosity, Leonardo da Vinci was 还能用副词： In 1939 the United States began to assist the British in their struggle against Germany, fully aware that it faced another world war. Dangling Modifiers 这是个英文上的歧义问题。看下面的句子： At the age of eight, my family finally bought a dog 修饰语 At the age of eight 显得“摇摇欲坠”, 因为它跟看起来跟主从句的主语毫无关系，这个年龄可以是这个家庭在8岁的时候买了只狗，也可以是在这只狗8岁的时候买了它。 一个修正方法是，my family, at the age of eight, finally bought a dog Ambiguous Modifiers 另外一个错误是，读者不知道修饰语在修饰什么。 Overtaxing oneself in physical activity too frequently results in injury. 这里，too frequently可能是说Overtaxing oneself在physical activity常常出现，也可能是说经常导致injury。 Overtaxing oneself too frequently in physical activity results in injury. Overtaxing oneself in physical activity results too frequently in injury. 或者使用resumptive modifier来避免模糊不清 Perhaps there are relationships among the components of the process that would dictate one order rather than another. Perhaps there are relationships among the components of the process, relationships that would dictate one order rather than another. Elegance 优雅，这是通往伟大作品的必经之路，但是，这是一条每个人都不一样的路，这里只能列出他们共有的元素，却无法教你如何组合他们成就伟大。 Balance and Symmetry 来欣赏一下对称之美： The national unity of a free people depends upon a sufficiently even balance of political power to make it impracticable for the administration to be arbitrary and for the opposition to be revolutionary and irreconcilable. Where that balance no longer exists,democracy perishes. For unless all the citizens of a state are forced by circumstances to compromise, unless they feel that they can affect policy but that no one can wholly dominate it, unless by habit and necessity they have to give and take, freedom cannot be maintained. —Walter Lippmann 1525359082863 一个小技巧是，你可以用both X and Y,not only X but also Y, neither X nor Y 来帮助你形成这样的排比句： 1525359101983 看一个neither nor的例子： 1525359168532 注意看上面这两句话，这里不仅neither nor是对称的，vacuous和mindless，emotion /eroticism, daytime /nighttime,soap opera /sitcoms, artists /audiences, able /willing, create /support.，都是对称的。就问你怕不怕… Emphasis and Rhythm 句子的强调与韵律。 这句话如果用介词介词，可能会不够力量，因为介词是个很弱的词。 The intellectual differences among races is a subject that only the most politically indifferent scientist is willing to look into. The intellectual differences among races is a subject that only the most politically indifferent scientist is willing to explore. 句子还可以使用nominalizations结尾，整个句子达到最高潮： … until in God’s good time, the New World, with all its power and might, steps forth to the rescue and the liberation of the old. 他本可以这样说，但就失去了力量： … until in God’s good time, the powerful New World steps forth to liberate the old. 下面这两段对比有点意思：用了比喻或隐喻的方法，将音乐和人生联系起来了，读起来非常有代入感。而另外一个就纯粹在说音乐，很单调。 The secret of the enjoyment of pleasure is to know when to stop …. We do this every time we listen to music. We do not seize hold of a particular chord or phrase and shout at the orchestra to go on playing it for the rest of the evening; on the contrary, however much we may like that particular moment of music; we know that its perpetuation would interrupt and kill the movement of the melody. We understand that the beauty of a symphony is less in these musical moments than in the whole movement from beginning to end. If the symphony tries to go on too long,if at a certain point the composer exhausts his creative ability and tries to carry on just for the sake of filling in the required space of time, then we begin to fidget in our chairs, feeling that he has denied the natural rhythm,has broken the smooth curve from birth to death, and that though a pretense of life is being made, it is in fact a living death. —Alan W. Watts, The Meaning of Happiness Watts本可以这样写: … however much we may like that particular moment of music, we know that its perpetuation would interrupt and spoil the movement of the melody … we begin to fidget in our chairs, feeling that he has denied the natural rhythm, has interrupted the regular movement from beginning to end, and that though a pretense of wholeness is being made, it is in fact a repeated end. 还有一个比喻的例子： The schoolmaster is the person who takes the children off the parents’ hands for a consideration. That is to say, he establishes a child prison, engages a number of employee schoolmasters as turnkeys, and covers up the essential cruelty and unnaturalness of the situation by torturing the children if they do not learn, and calling this process, which is within the capacity of any fool or blackguard, by the sacred name of Teaching. —-G. B. Shaw, Sham Education 比喻在很多领域都能够使用，比如： 历史学家： &gt; This is what may be called the common-sense view of history.History consists of a corpus of ascertained facts. The facts are available to the historian in documents, inscriptions, and so on, like fish on the fishmonger’s slab. The historian collects them, takes them home, and cooks and serves them in whatever style appeals to him. Acton, whose culinary tastes were austere, wanted them served plain …. Sir George Clark, critical as he was of Acton’s attitude, himself contrasts the “hard core of facts” in history with the “surrounding pulp of disputable interpretation”–forgetting perhaps that the pulpy part of the fruit is more rewarding than the hardcore. &gt; -E. H. Carr, What Is History? 生物 &gt; Some of you may have been thinking that, instead of delivering a scientific address, I have been indulging in a flight of fancy. It is a flight, but not of mere fancy, nor is it just an individual indulgence. It is my small personal attempt to share in the flight of the mind into new realms of our cosmic environment. We have evolved wings for such flights,in the shape of the disciplined scientific imagination. Support for those wings is provided by the atmosphere of knowledge created by human science and learning:so far as this supporting atmosphere extends, so far can our wings take us in our exploration. &gt; —-Julian Huxley, “New Bottles for Old Wine,”Journal of the Royal Anthropological Institute 哲学家： &gt;Quine has long professed his skepticism about the possibility of making any sense of the refractory idioms of intentionality, so he needs opacity only to provide a quarantine barrier protecting the healthy,extensional part of a sentence from the infected part. &gt; –Daniel C. Dennett, “Beyond Belief” 13 物理学家： &gt;Whereas the lepton pair has a positive rest mass when it is regarded as a single particle moving with a velocity equal to the vector sum of the motions of its two components, a photon always has zero rest mass. This difference can be glossed over, however, by treating the lepton pair as the offspring of the decay of a short-lived photon like parent called a virtual photon. &gt; –Leon M. Lederman, “The Upsilon Particle,”Scientific American 写在最后 本文只是本人在读《Style: Toward clarity and grace》和《Style: Lessons in clarity and grace》整理的一些笔记，难免有错误，欢迎指正。 最后给大家送上一句话： 任何实用性的书都不能解决该书所关心的实际问题。一本理论性的作品可以解决自己提出的问题。但是实际的问题却只能靠行动来解决。当你的实际问题是如何赚钱谋生时，一本教你如何交朋友或影响别人的书，虽然可能建议你很多事，但却不能替你解决问题。没有任何捷径能解决这个问题，只能靠你自己去赚钱谋生才能解决。 —-Mortimer J. Adler 参考资料 Williams, Joseph M., and Gregory G. Colomb. Style: Toward clarity and grace. Chicago: University of Chicago Press, 1990. Williams, Joseph M., and Gregory G. Colomb. Style: Lessons in clarity and grace. Vol. 565214475. Boston: Longman, 2010. Schimel, Joshua. Writing science: how to write papers that get cited and proposals that get funded. OUP USA, 2012. Josh Schimel - Writing Science: Framing the story: structure A discussion on the book “Writing Science” by Joshua Schimel Dangling_modifier-wiki modifier-wiki]]></content>
  </entry>
  <entry>
    <title><![CDATA[隐变量是什么？]]></title>
    <url>%2F2018%2F04%2F02%2FLatentVar%2FLatentVar%2F</url>
    <content type="text"><![CDATA[有没有想过，什么是隐变量？为什么我们要把隐变量给积分掉？关于隐变量的模型都在做些什么？ \[ P(X)=\sum_zP(X|Z)P(Z) \] 公式1中z是一个隐变量，我们把z给积分掉，于是得到X的概率分布。 什么是隐变量？ 简单来说，隐变量就是只有上帝才知道的变量，而这个变量又对你想要的结果有着很大的影响。比如说你想预测股票是否会涨，但是影响股票的涨跌的其中一个因素是当前经济的好坏，然而这个东西，你是没有办法直接观测到的，你只能通过各种想象去推测。 z = 1 : Economy is good. z = 0 : Economy is bad. x = 1 : Stock market goes up. x = 0: Stock market goes down. 但是你又想预测股票的涨跌，那该怎么办呢？这是我们就可以把隐变量给积分掉了，因为 \[ P(X=1)=P(X=1,Z=0)+P(X=1,Z=1) \] 也就是说，我们只要综合考虑所有隐变量的作用，我们就能够预测股票的涨跌而完全不需要知道隐变量的真实取值到底是什么。 隐变量模型(Latent Variable Model,LVM)都在做些什么？ 但是仅仅靠对隐变量进行积分是远远不够的，因为这个积分一般情况下只有上帝才会算。。那么为了简化这个计算过程，实际上，我们可以对隐变量做一些合理的假设，比如说，我们认为，如果昨天的经济很好，即Z=1，那么今天的经济将会很大概率也很好，而且今天的经济只与昨天有关，那么我们就能推导出HMM模型，这里的X就是我们实际观测到的股市涨跌。 Image result for hidden markov model 参考资料 [what is the reason to marginalize over latent variables](https://www.reddit.com/r/MachineLearning/comments/4e7sm4/what_is_the_reason_to_marginalize_over_latent/)]]></content>
      <tags>
        <tag>机器学习</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[变分自编码机(VAE)]]></title>
    <url>%2F2018%2F03%2F13%2FVAE%2F</url>
    <content type="text"><![CDATA[变分自编码机(VAE) 从EM到变分推断 我们假设有一个隐变量z，我们的样本\(x^{( i)}\)是从\(p_{\theta }( x|z)\)中产生，因为有隐变量的存在，通常\(p_{\theta }( x) =\int p_{\theta }( z) p_{\theta }( x|z) dz\)的边缘分布是没法算的。 所以传统来说，我们会构造出一个下界： \[ \begin{aligned} \log p( x) &amp; =\underbrace{E_{z\sim q( z)}(\log p( x ,z)) -H( q)}_{ELOB} +KL( q( z) ||p( z |x)) \end{aligned} \] 而EM算法，就是通过精心选择这个下界中的q，从而使得下界最大化，也就是计算\(q( z) =p( z|x)\)来近似该模型的似然度。进一步可以参考我之前写的文章《带你理解EM算法》 然而如果我们令\(q( z) =p( z|x) =\frac{p_{\theta }( x|z) p_{\theta }( z)}{p_{\theta }( x)}\)也是不可计算的呢，比如你的z有很多很多维，那么你在算那个期望的时候就会出现一堆积分，这是非常难算的。 此时我们可以使用变分推断的方法，那就是，我们不直接令\(q( z) =p( z|x)\)了，而是选一个相对简单的分布q去近似\(p( z|x)\)。简单的q怎么来？最常用的就是对q作平均场(mean-field)假设，即，我们可以认为： \[ q(\mathbf{z}) =\prod _{i} q_{i}( z_{i}) \] 这个假设的意思是，虽然你的z有很多维，但是他们都是相互独立的，也就是说，你算很多很多积分的时候，每个\(z_{i}\)可以分别积分，所以一个联合积分的问题就简化成了仅需一个积分的问题，于是我们在优化ELOB的时候，只需分别优化\(q_{i}\)就可以了。将平均场假设代进ELOB中，化简可以得到 \[ \begin{aligned} ELOB &amp; =\int _{z_{j}} q_{j}( z_{j})\left[\underset{z_{i\neq j}}{\int \dotsc \int } q( z)\log p( x,z) dz_{i}\right] dz_{j} -\sum _{i}\int _{z_{i}} q_{i}( z_{i})\log q_{i}( z_{i}) dz_{i}\\ &amp; =\int _{z_{j}} q_{j}( z_{j}) E_{i\neq j}[\log p( x,z)] dz_{j} -\int _{z_{j}} q_{j}( z_{j})\log q_{j}( z_{j}) dz_{j} -\underbrace{\sum _{i\neq j}\int _{z_{i}} q_{i}( z_{i})\log q_{i}( z_{i}) dz_{i}}_{Const\ for\ j}\\ &amp; =\int _{z_{j}} q_{j}( z_{j})\log\frac{E_{i\neq j}[\log p( x,z)]}{q_{j}( z_{j})} dz_{j} -\underbrace{\sum ^{M}_{i\neq j}\int _{z_{i}} q_{i}( z_{i})\log q_{i}( z_{i}) dz_{i}}_{Const\ for\ j}\\ &amp; =-KL( E_{i\neq j}[\log p( x,z) ||q_{j}( z_{j})]) +const \end{aligned} \] 因为每个\(z_{j}\)都是相互独立，于是，只需分别最大化每个\(z_{j}\)的ELOB就可以实现ELOB最大化，而其他的项都视作了常数，此时，ELOB就简单地变成了一个负的KL距离，所以，想要最大化这个ELOB，我们只需要令 \[ q_{j}( z_{j}) =E_{i\neq j}[\log p( x,z)] \] 就可以了。这实际上是一个迭代的问题，因为在constant中，包含了其他的项的q，所以，我们只需不断地更新各个元素q的分布直到收敛就可以了。 从变分推断到VAE 但是，如果即使用了平均场假设也没法算，而使用MCMC又太慢怎么办？为了解决这个问题，我们回到最初的那个下界的表达式中 \[ \begin{aligned} \log p( x |\theta ) &amp; =\underbrace{E_{z\sim q( z)}(\log p( x ,z)) -H( q)}_{ELOB} +KL( q( z) ||p( z |x)) \end{aligned} \] 实际上ELOB有几种不同的，但是等价的表达方式： KL form : \[\mathcal{L}( \theta ;x) =E_{z\sim q( z)}(\log p_{\theta }( x|z)) -KL( q( z) ||p_{\theta }( z))\] Entropy form: \[\mathcal{L}( \theta ;x) =E_{z\sim q( z)}(\log p_{\theta }( x ,z)) -H( q)\] Fully Monte Carlo(FMC) form: \[\mathcal{L}( \theta ;x) =E_{z\sim q( z)}[\log p_{\theta }( x,z) -\log q( z)]\] 其中q是一个任意的分布，那么现在，我们令\(q( z) \triangleq q_{\phi }( z|x)\)，用KL形式的下界可以得到： \[ \mathcal{L}( \theta ,\phi ;x) =E_{z\sim q_{\phi }( z|x)}(\log p_{\theta }( x|z)) -KL( q_{\phi }( z|x) ||p_{\theta }( z)) \] 现在引入了一个带参数的\(q_{\phi }​\)来表示这个上界，如果要最大化这个上界，我们只要用梯度上升不断更新参数\(\phi​\)就可以了。一般情况下，KL距离的那一项是有解析解的，所以梯度很好求。然而对第一项求梯度则没那么简单，一个常用的方法是 \[ \nabla _{\phi } E_{z\sim q_{\phi }( z)}( f( z)) =E_{z\sim q_{\phi }( z)}[ f( z) \nabla _{\phi }\log q_{\phi }( z)] \simeq \frac{1}{L}\sum ^{L}_{l=1} f\left( z^{l}\right) \nabla _{\phi }\log q_{\phi }\left( z^{l}\right) \] reparameterization 如上图，我们可以用reparameterize trick来解决这个问题，这时z对于x来说就是一个固定的值，只要我们从\(\epsilon\)中抽样后，固定住就可以了，设 \[ z=g_{\phi }( \epsilon ,x) ,\epsilon \sim p( \epsilon ) \] 其中\(\epsilon\)是一个已知的简单分布，比如说标准正态分布，次数z的产生就变成了从某个固定的标准分布中采样，于是下界中的期望那一项可以改写成： \[ E_{z\sim q_{\phi }( z|x)}(\log p_{\theta }( x|z)) =E_{\epsilon \sim p( \epsilon )}(\log p_{\theta }( x|g_{\phi }( \epsilon ,x))) \simeq \frac{1}{L}\sum ^{L}_{l=1}\log p_{\theta }( x|g_{\phi }( \epsilon ,x)) \] 于是对于一个样本\(x^{( i)}\)的下界可以写作： \[ \mathcal{L}\left( \theta ,\phi ;x^{( i)}\right) =\frac{1}{L}\sum ^{L}_{l=1}\log p_{\theta }\left( x^{( i)} |z^{( i,l)}\right) -KL\left( q_{\phi }\left( z^{( i)} |x^{( i)}\right) ||p_{\theta }\left( z^{( i)}\right)\right) \] 其中\(z^{( i,l)} =g_{\phi }\left( \epsilon ^{( i,l)} ,x^{( i)}\right) ,\epsilon ^{( l)} \sim p( \epsilon )\) 在这里，如果我们用一个MLP来表示\(p_{\theta}\)和\(q_{\phi}\)和就可以对用这个目标函数求梯度来最大化了，注意产生z的分布\(q_{\phi }\)其实是由一个标准正态分布的\(\epsilon\)和一个用MLP表示的映射函数\(g_{\phi}\)构成的，所以训练过程实际上是更新\(p_{\theta}\)和\(g_{\phi}\)这两个MLP的参数，我们称\(p_\theta\)为encoder network,\(q_{\phi}\)为decoder network。而z的产生则是从\(p( \epsilon )\)抽一个样本，然后经过一个确定性\(g_{\phi }\)来产生。 更直观一点，如果我们假设先验分布\(p( z)\),\(p( \epsilon )\)服从标准正态分布， \[ z=q_{\phi }( z|x) =g_{\phi }( \epsilon ,x) =\mu _{\phi }( x) +\Sigma _{\phi }^{1/2}( x) \epsilon \] 也就是说，\(q_{\phi }( z|x) \sim N\left( \mu _{\phi }( x) ,\Sigma _{\phi }^{1/2}( x)\right)\)也是正态分布，不过其参数由x决定。于是对于两个正态分布的KL距离，对于有J个维度的z，我们完全可以算出其解析解： \[ \begin{aligned} -KL( q_{\phi }(\mathbf{z} |\mathbf{x}) ||p_{\theta }(\mathbf{z})) &amp; =-KL( N(\mathbf{\mu }_{\phi } ,\mathbf{\sigma }_{\phi }) ||N(\mathbf{0} ,\mathbf{I}))\\ &amp; =\frac{1}{2}\sum ^{J}_{j=1}\left(\left( 1+\log \sigma ^{2}_{j}\right) -\mu ^{2}_{j} -\sigma ^{2}_{j}\right) \end{aligned} \] 接下来我们看看这个网络的架构 vae encoder network将一只喵星人映射成一个均值和一个方差，然后产生一个z样本，通过decoder network再变成一只喵~ 然而VAE对比GAN确实存在一些问题。 vse vs gan 可以看到VAE的“拟合”能力没有GAN的强，VAE会趋于平滑而GAN则不会。而且VAE产生的图像会比较模糊，这似乎所有优化对数似然的目标函数都有这问题(《Deep learning》) 参考资料 Auto-encoding variational bayes Tutorial on variational autoencoders How does the reparameterization trick for VAEs work and why is it important? Variational Autoencoders Explained Deep learning 徐亦达机器学习课程 带你理解EM算法]]></content>
      <tags>
        <tag>机器学习</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[正向跟反向KL距离到底有什么区别？]]></title>
    <url>%2F2018%2F03%2F06%2FKL-divergence%2F</url>
    <content type="text"><![CDATA[如果我们要用一个分布q去近似一个分布p，我们一般的做法都是去优化一个KL距离使得他最小，但是KL距离是一个不对称的距离，那么我们优化\(KL(q||p)\)跟\(KL(p||q)\)的区别在哪里? 首先考虑第一种KL距离\(KL(p||q)\)，也被称为M-projection 或 moment projection，定义如下： \[ KL(p||q)=\sum_xp(x)\ln\frac{p(x)}{q(x)} \] 在这个距离里面，我们发现只有当\(p(x)=0\)的时候，\(q(x)\)才能等于0，否则他们之间的距离就会无穷大，于是为了近似p，q会尽可能保持大于0，因为他能够等于0的地方太少了。于是在这种情况下q就会高估p的值域。 对于另外一个距离\(KL(q||p)\),又称为I-projection 或 information projection. \[ KL(q||p)=\sum_xq(x)\ln\frac{q(x)}{p(x)} \] 在这个距离里面，我们发现当\(p(x)=0\)的时候 ，我们必须要保证\(q(x)=0\)，否则这个距离就会变成无穷大，那我们的q就无法近似p了。所以，q很可能为了近似p，而避开或被p(x)=0的点截断。这种特性会导致q会低估p的值域。 图也正好表达了这种关系，\(KL(p||q)\)会高估p的值域尽可能保持大于0，而\(KL(q||p)\)会低估p的值域，被p的0点截断。]]></content>
      <tags>
        <tag>机器学习</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[带你理解EM算法]]></title>
    <url>%2F2018%2F03%2F01%2FEM%2F</url>
    <content type="text"><![CDATA[很多时候，我们都要最大化似然度来求得一个参数$$的最优值。但是，很多时候，当我们的模型中存在隐变量的时候（比如，一个词所属的主题，聚类问题中样本的类别, etc.），我们的似然度是很难求的。下面是该似然度的式子，其中z表示不可观测的变量，x表示可观测的变量，由于z是不可观测的，所以，要求似然度，我们必须要对z求和或求积分(连续的时候求积分，离散的时候求和)。 \[ \mathcal{L}( \theta ) =\sum ^{N}_{i=1}\log p( x_{i} |\theta ) =\sum ^{N}_{i=1}\log\left[\sum _{z_{i}} p( x_{i} ,z_{i} |\theta )\right] \] 可以看到上面的这个式子，如果不存在隐变量的话，那么那个log是直接作用与p的，如果p恰好是指数族分布，那么这个似然度就非常好求，但是有隐变量的时候，log被一个\(\sum _{z}\)给截断的，这就使得这个式子变得很难优化。 这个问题的关键在于，\(\log p( x_{i} |\theta )\)很难优化，但是\(p( x_{i} ,z_{i} |\theta )\)却很好优化,比如说聚类的时候，你提前知道所有样本的类别了，那你计算每个类别的中心距离就太简单了，但是要优化\(p( x_{i} ,z_{i} |\theta )\)的前提是，你要看得到隐变量的取值才行啊，然而隐变量是看不到的。EM算法通过一个巧妙的构造，让\(p( x_{i} ,z_{i} |\theta )\)和似然度\(p( x_{i} |\theta )\)的下界联系起来，这是我们只要优化下界就能代替优化似然度本身。 接下来我们看一下对于单个样本\(p( x_{i})\)似然度的下界是什么东西。在这里我们引入了\(z_{i}\)的分布\(q_{i}( z_{i})\) \[ \begin{aligned} \log p( x_{i} |\theta ) &amp; =\log p( x_{i} ,z_{i}) -\log p( z_{i} |x_{i})\\ &amp; =\log\left(\frac{p( x_{i} ,z_{i})}{q_{i}( z_{i})}\right) -\log\left(\frac{p( z_{i} |x_{i})}{q_{i}( z_{i})}\right)\\ &amp; =\log p( x_{i} ,z_{i}) -\log q_{i}( z_{i}) -\log\left(\frac{p( z_{i} |x_{i})}{q_{i}( z_{i})}\right)\\ &amp; =\int q_{i}( z_{i})\log p( x_{i} ,z_{i}) dz-\int q_{i}( z_{i})\log q( z_{i}) dz-\int q_{i}( z_{i})\log\left(\frac{p( z_{i} |x_{i})}{q_{i}( z_{i})}\right) dz( 两边同时对z求期望)\\ &amp; =\underbrace{E_{z_{i}}(\log p( x_{i} ,z_{i})) -H( q_{i})}_{ELOB_{i}} +KL( q_{i}( z_{i}) ||p( z_{i} |x_{i})) \end{aligned} \] 我们知道\(KL( q( z_{i}) ||p( z_{i} |x_{i})) \geqslant 0\)，所以这个似然度一定有 \[ \log p( x_{i}) \geqslant E_{z_{i}}(\log p( x_{i} ,z_{i})) -H( q_{i}) \] 可以看到对数似然度被分解成了两部分，一个是evidence lower bound(ELOB)，似然度的下界，另一个是KL距离，不管q是什么分布，这两部分加起来肯定是一样的。 ELOB与KL 图中的L是我们的ELOB。 也就是说，只要我们令KL距离为0，此时 \(q(z) =p(z|x)\) ，那么ELOB就等于似然度的值了。这就意味着我们最大化 \(\theta\) 的时候，不再需要对\(\log p(x|\theta)\)做，只要找到 \(\theta\) 使得这个ELOB最大不就相当于在“最大化我们的似然度”吗。而最大化这个ELOB太简单了，在这里\(H(q)\) 是q的熵，与 \(\theta\) 无关只与分布q有关，所以不用管。于是我们把 \(q(z) =p(z|x)\) 代入到ELOB中得到 \[ \begin{aligned} ELOB_{i} &amp; =E_{z_{i}}(\log p( x_{i} ,z_{i})) +const\\ &amp; =\int q_{i}( z_{i})\log p( x_{i} ,z_{i}) dz+const\\ &amp; =\int p( z_{i} |x_{i})\log p( x_{i} ,z_{i}) dz+const\\ &amp; =\sum _{z_{i}} p( z_{i} |x_{i})\log p( x_{i} ,z_{i}) +const( 如果z是离散的) \end{aligned} \] EM算法示意图 EM算法，示意图，E步，把KL设为0，蓝色的线往上移，使得ELOB=似然度，M步，最大化ELOB，使得似然度增大，红色的线往上移，然后我们不断重复直到收敛。 考虑所有样本，正式的EM框架： E步：把\(q_{i}( z_{i}) =p( z_{i} |x_{i})\)代入到下界中，再把常数项剔除， \[ Q\left( \theta ,\theta ^{t-1}\right) =\sum ^{N}_{i=1}\sum _{z_{i}} p( z_{i} |x_{i},\theta^{t-1})\log p( x_{i} ,z_{i},\theta)=\sum ^{N}_{i=1} E\left[\log p( x_{i} ,z_{i} |\theta ) |x_{i} ,\theta ^{t-1}\right] \] M步：最大化下界ELOB \[ \theta ^{t} =\arg\max_{\theta } Q\left( \theta ,\theta ^{t-1}\right) \] M步2：我们还可以做MAP估计，只需要在Q加上参数的对数先验就可以轻松完成，E步没有任何变化 \[ \theta ^{t} =\arg\max_{\theta } Q\left( \theta ,\theta ^{t-1}\right) +\log p( \theta ) \] 在MAP估计的时候，不仅需要考虑下界的最大化，还需要考虑先验对参数的影响。]]></content>
      <tags>
        <tag>机器学习</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[社交网络中的Link Prediction]]></title>
    <url>%2F2018%2F02%2F26%2FLinkPrediction%2F</url>
    <content type="text"><![CDATA[介绍 给你一段时间内的社交网络关系，我们能否预测出成员之间在未来的互动？ 我们称该问题为Link prediction Problem.他还有另外一些常见的应用，比如社交网站的好友推荐，预测蛋白质间的相互影响，预测犯罪嫌疑人的关系，商品推荐等等。 在基于社交网络的Link predition问题中，我们通常要考虑社交网络所带有的特有的特质。所以我们先介绍一下社交网络的几个有趣的性质： power law degree distribution the small world phenomenon the community structure (clustering effect) etc Power law degree distribution: 大部分人都只有很少的链接，但是有一小部分人，他们的链接的数量远远多于其他人。 power law degree distribution Small-World Phenomenon: 或者叫六度空间，你和任何一个陌生人之间所间隔的人不会超过六个 community structure (clustering effect): 社交网络里面会有很多个小群体，他们都相互认识彼此。 那么到底要怎么去做link predction呢，目前传统的方法，有Path-based Methods,Neighbor-based Methods等等。下面是他们的介绍。 Path-based Methods Graph Distance 一个最直接的预测方法就是计算两个结点间的距离，然后根据距离的大小来预测，两个结点越近那么就越容易在未来建立联系。但是在上百万的结点下直接用dijkstra算法是非常低效的。相反，我们可以利用small world phenomenon来提高我们的效率。 比如说要计算x，y两点距离，我们先初始化两个集合 \(S=\{x\},D=\{y\}\),然后开始S和D的集合，扩展的方法就是不断地把集合里面元素的邻居放进去，直到S和D相同的元素为止。根据small world phenomenon来说，扩展的次数不会太多。另外效率起见，我们一般选择元素数量较少的那个来扩展。 Katz (Exponentially Damped Path Counts) 我们还可以考虑用x，y之间存在的路径的数量来衡量它们的距离。然而，路径有长有短，一般认为，那些很长的路径其实是没什么说服力的，于是引入指数衰减机制随着路径长度进行衰减。 \[ Score(x,y)=\sum_{l=1}^{\infty}\beta^l|path_{x,y}^l| \] \(\beta\)就是指数衰减的系数，\(path^l\)表示那些长度为l的路径。 Hitting Time 为了加快计算速度，可以使用蒙特卡洛的技术来估计x，y的路径的数量。从x出发，在附近随机的跳转，如果到达y，则记录下这次到达y的所需跳转次数。最后我们用 总跳转次数/到达y的次数 来表示距离。 \[ Score(x,y)=-H_{x,y} \] 其中\(H_{x,y}\)为总跳转次数/到达y的次数，我们取负H来表示评分,H越小表示越近则越好。 Rooted PageRank 然而，如果y是一个非常有影响力的人，那么很多人都能在非常少的跳转次数下到达y，为了减轻这效应，我们增加一个随机“reset”以及继续游走的机制。当到达y时，以概率\(\alpha\)跳回x，以\(1-\alpha\)继续随机游走。并记录下经过y的次数。 \[ Score(x,y)=-H_{x,y}\pi_y \] 其中\(\pi_y\)表示那么多次跳转经过y概率。 Neighbor-based Methods Common Neighbors 当两个用户有着很多个相同的邻居，我们就认为这两个用户很有可能建立联系。所以两个用户的相似性就用他们相同邻居的数量表示： \[ Score(x,y)=|\mathcal{T}(x)\cap\mathcal{T}(y)| \] 其中\(\mathcal{T}(x)\)表示x的邻居。实际上这个方法揭示了一个叫“closing a trangle”的现象 Jaccard’s Coefficient 然而Common Neighbors有一个很大的问题，假设有一个人有非常多的邻居，那么所有人都会倾向于预测跟他产生互动，为此，我们还要把他们邻居的数量考虑进去，于是我们认为，如果两个人共同邻居的数量在他们所有好友数量中占比越大，就认为可能建立联系。即 \[ Score(x,y)=\frac{|\mathcal{T}(x)\cap\mathcal{T}(y)|}{|\mathcal{T}(x)\cup\mathcal{T}(y)|} \] Adamic/Adar (Frequency-Weighted Common Neighbors) 这个方法同样是对Common Neighbors的改进，当我们计算两个相同邻居的数量的时候，其实每个邻居的“重要程度”都是不一样的，我们认为这个邻居的邻居数量越少，就越凸显它作为“中间人”的重要性，毕竟一共只认识那么少人，却恰好是x，y的好朋友。 \[ Score(x,y)=\sum_{Z\in \mathcal{T}(x)\cap\mathcal{T}(y)}\frac{1}{\log |\mathcal{T}(z)|} \] Friendes-mearsure 既然两个人有相同的好友可以表达他们间的距离，那么我们可以把这一个思想推广，我们认为，他们的好友之间很有可能互为好友。我们就计算他们好友之间互为好友的数量作为评价标准。 friends-measure Preferential Attachment 另外，如果两个用户拥有的好友数量越多，那么就越有可能更愿意去建立联系。也就是“富人越富”原则，基于这思想,用他们两个用户的好友数量的乘积作为评分。 \[ Score(x,y)=|\mathcal{T}(x)||\mathcal{T}(y)| \] Link Prediction with Personalized Social Influence 上面的方法只考虑了结构，现在介绍一种考虑了用户行为的方法，比如转发，评论，点赞等。 这里考虑一种低秩表达,S和T，使得未来会建立联系的用户i和用户j有, \[ S_iT_j&gt;S_iT_{n} \] 其中(i,n)是那些不会建立联系的人。 用一个sigmoid函数来表达下一时刻会active的概率。这里的f使用了log函数，主要考虑了其影响是随着次数指数衰减的。 最后给出一个目标函数通过优化得到S和T。 Link Prediction via Subgraph Embedding-Based Convex Matrix Completion 还有另外一个方法，它考虑了subgraph. 基本思想就是，每个结点，用广度优先搜索就可以得到不同深度的子图，然后利用这些结构信息来embedding,最后通过将不同深度得到的embedding concat在一起，就得到了这个结点的embedding. 最后就用这些embedding的余弦相似度来做link prediction. References What will Facebook friendships look like tomorrow? Link Prediction via Subgraph Embedding-Based Convex Matrix Completion. Zhu Cao, Linlin Wang, Gerard De melo.AAAI 2018. Link Prediction with Personalized Social Influence. Huo, Zepeng, Xiao Huang, Xia Hu. AAAI 2018。 Xuezhi Cao, Haokun Chen, Xuejian Wang, Weinan Zhang, Yong Yu. The Thirty-Second AAAI Conference on Artificial Intelligence AAAI 2018.]]></content>
      <tags>
        <tag>数据挖掘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[PageRank算法在社交网络上的应用]]></title>
    <url>%2F2018%2F02%2F19%2FPageRank%2F</url>
    <content type="text"><![CDATA[PageRank算法介绍 pagerank算法的核心思想是，计算一个用户随机点击一个网站然后不停点击从而到达各个网站的概率。而一个网站的打开概率又取决于那些指向他自己的那些网站的概率，所以这个概率的计算是一个不断迭代的过程。 一个简单的例子：B,C,D同时指向A，我们认为，BCD的PR是0.25，那么A的PR值就是0.75 1519042867642 但是，如下图，如果网站D有3个外链，那么你从网站D跳到网站A的概率就不一定是100%了，这是我们要给它做一个权重衰减，我们给PR值除以3 1519048276921 这个模型可以写作以下公式： \[ PR(u) = \sum_{v \in B_u} \frac{PR(v)}{L(v)} \] 其中L表示结点的出度，\(B_u\)是所有指向u的结点。然而一个用户在点击网页的时候是不会无限点下去了，他最终肯定会在某个结点上停止，于是，我们可以引入一个damping factor来表达这种关系，当你计算PR的时候，要乘一个衰减的系数来认为有一定概率会在上一个页面停止，而不会跳转到这个页面来。于是PR的公式可以改写成这样： \[ PR(p_i) = \frac{1-d}{N} + d \sum_{p_j \in M(p_i)} \frac{PR (p_j)}{L(p_j)} \] d就是damping factor,d一般取0.85,N是结点数量，那个1-d/N是为了保证这个概率值在0到1之间。这个表达式可以写成矩阵的形式： \[ \mathbf{R} = \begin{bmatrix} PR(p_1) \\ PR(p_2) \\ \vdots \\ PR(p_N) \end{bmatrix} \] \[ \mathbf{R} = \begin{bmatrix} {(1-d)/ N} \\ {(1-d) / N} \\ \vdots \\ {(1-d) / N} \end{bmatrix} + d \begin{bmatrix} \ell(p_1,p_1) &amp; \ell(p_1,p_2) &amp; \cdots &amp; \ell(p_1,p_N) \\ \ell(p_2,p_1) &amp; \ddots &amp; &amp; \vdots \\ \vdots &amp; &amp; \ell(p_i,p_j) &amp; \\ \ell(p_N,p_1) &amp; \cdots &amp; &amp; \ell(p_N,p_N) \end{bmatrix} \mathbf{R} \] 其中\(l(p_i,p_j)\)表示结点\(p_i\)对\(p_j\)的影响程度，比如在例子2，里面，\(l(B,A)=1/2\).写成矩阵形式,这里P其实相当于邻接矩阵： \[ \mathbf{R} = d P\mathbf{R} + \frac{1-d}{N} \mathbf{1} \] 我们只要求解这个R，就能得到每个结点的PR值。 Ranking Users in Social Networks with Higher-Order Structures 这里介绍一种改进的方法，这是在社交网络上的应用，在计算PR的时候，其实我们默认了，在一个网站上以相同概率跳转到其他的结点，但这其实在社交网络里面是有问题的。看下面的例子。 用户1同时关注了2,3,4在三个用户，但是，很显然，用户1其实是更信任用户2多过用户4的，因为用户1同时关注了2跟3. 1519050454857 所以我们要做的就是，考虑这种三角结构： 1519052828959 一共有7种。举个例子，当我们考虑M6时。 1519052801833 对于结点3而言，M6结构一共出现了2次，分别是153,123.所以矩阵第1行第3列等于2. 上面的这个考虑了三角结构的邻接矩阵可以用下面的公式计算。其中\(B=W\odot W^T\),\(U=W-B\),其中\(\odot\)是对应元素相乘 1519053031829 最后对于PR的计算公式： \[ \mathbf{R} = d P\mathbf{R} + \frac{1-d}{N} \mathbf{1} \] 我们用 \[ H_{M_k}=\alpha W+(1-\alpha)W_{M_k} \] 来替换掉P就能取得很好的效果。 扩展资料 其实PR只是目前页面排序的一个小小的权重，这是目前谷歌最新的企鹅算法 参考资料 Zhao, Huan, et al. “Ranking Users in Social Networks with Higher-Order Structures.” (AAAI 2018) PageRank-wiki]]></content>
      <tags>
        <tag>数据挖掘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Computational Learning Theory and Model Selection]]></title>
    <url>%2F2018%2F02%2F18%2FComputational%20Learning%20Theory%20and%20Model%20Selection%2F</url>
    <content type="text"><![CDATA[True vs. Empirical Risk 当你有一个函数f的时候，你自然就想知道它到底是好还是坏，那么怎么评价呢？我们可以用一个叫risk的东西来衡量这个函数的风险，这里的risk可以直观地看做你函数的错误率。然而，根据no free lunch定理，显然没有一个函数永远是最优的，那这个risk到底是什么？它其实是在你数据分布\(\mathcal{D}\)上的风险。而我们通常用empirical risk来对true risk进行估计，也就是对错误率估计,更一般empirical risk可以称为经验误差，当你的样本量越多的时候，你对函数f的风险的估计就越准确。 True Risk: Classification - 误分类概率 \(P(f(X)\ne Y)\) Regression - Mean Squared Error \(\mathbb{E}[(f(X)-Y)^2]\) Empirical Risk: Classification - \(\frac{1}{n}\sum_{i=1}^n1_{f(X_i\ne Y_i)}\) Regression - \(\frac{1}{n}\sum_{i=1}^n{(f(X_i)- Y_i)^2}\) %可是我们仅仅用经验误差是不够的，因为经验误差只考虑了“训练集”的误差，我们可以很容易构造出一个函数使得他完美拟合所有数据。所以我们还要考虑泛化误差才行。 我们设存在一个完美的risk,\(R^*\) ,还有一个从n个数据中估计出来的f以及它对应的risk，\(E[R(\hat{f_n})]\)，我们定义一个Excess risk为\(E[R(\hat{f_n})]-R^*\),于是这个excess risk可以分解为两部分，分别是estimation error 和 approximation error. 1518535927188 直观来看，estimation error，是因为缺少足够的样本，从而导致我们从函数族\(\mathcal{F}\)选择模型时没法取得最优的模型而产生的误差。而approximation error是由于函数族\(\mathcal{F}\)的限制而产生的误差，比如说线性回归，由于限制在了线性的空间中，而对非线性的数据存在误差。 简单地说，estimation error是样本的问题，approximation error是模型复杂度的问题。 然而模型越复杂，所需的样本也就越多，这就形成一个平衡，你需要一个合适的hypothese class \(\mathcal{F}\)大小。 1518535937954 Learning Theory Empirical Risk Minimization 1518537111943 三个重要的引理 1518537123984 1518881523085 使用这几个引理可以让我们证明在learning theory中非常重要的结论。第三个定理是，一般套路就是考虑只有一个样本改变后两个相减的差，小于某个d，然后就可以套这个不等式，然后令最右边的是\(\delta\)，就得出了一个界。 现在我们来定义一下Hypothesis Class，数据集不同的划分方式其实就对应了不同的假设类，而所有的划分方法就组成了假设类\(\mathcal{H}\). 这个是跟，“概念类”对应的一个概念，所谓概念类其实就是数据正确的标签\(\mathcal{C}\).，所以我们要做的事情就是搜索出一个最优的假设h，使得逼近正确的标签。 Finite Hypothesis Space 对于有限的假设空间，有以下定理 1518881888335 上面这个引理是由hoeffding 不等式的出来的，因为这里的\(\hat{E}\)对应的是经验误差，是对E的近似，所以直接用hoeffding不等式。 1518877689847 令\(\delta=2|\mathcal{H}|\exp(-2m\epsilon^2)\)即可得12.19 上面定理用了引理1的集合的不等式。通过最下面的这个界可以看到，当\(|H|\)越大的时候这个界是越大的。 Infinite Hypothesis Space 当假设类是无限时，我们可以构造出一个叫增长函数的东西，用来表示假设空间H对m个样本所能赋予的最大可能结果数。 1518882559587 如果我们的假设空间能够对这所有m个样本赋予任意的标签，那么H在m个样本下是可以打散这个数据集D的，那么我们定义那个可以打散的m的最大值，称为H的VC维。也就是说，VC维是用于衡量假设空间\(|H|\)大小的一个东西。 1518882573822 这样我们就能用VC维来构造出经验误差的界,VC维有点像有限假设类下的类比。 1518882637789 Rademacher 复杂度 Rademacher 复杂度，他是对VC维的一个改进，因为VC维在刻画假设空间的大小时，并没有考虑数据的分布，这使得他的界非常松，实际意义比较小。 1518882752502 这里\(y_i\)取1，-1 ，然而这里yi其实是指现实中的值，而如果考虑更一般的情况，我们将y_i换成一个1，-1的随机变量，于是，问题转化为，我们希望找到一个h，使得这个最大（等价于经验误差最小） 1518882879727 这里我的理解是，因为sup是在\(\sigma_i\)外面的，所以当我们选择h的时候，\(\sigma_i\)相当于是固定的，也就是可以看做是一个随机标签的样本，于是如果我们总能找到一个h使得每个\(h(x_i)=\sigma_i\)，那么这个东西就等于1，那这个假设空间就很棒。 1518883423948 最后这里考虑的是在数据集D下m个样本的函数空间F的复杂度，它的做法就是对所有从D中采样，而且是m个样本的数据集Z进行积分，也就是考虑所有m个样本的组合，然后求均值，最后的就是要求的平均复杂度，我们可以通过这个函数空间的复杂度来给出这泛化误差的界。 Reference Computational Learning Theory What does the term “Estimation error” mean? Excess Error, Approximation Error, and Estimation Error 如何通俗的理解机器学习中的VC维、shatter和break point]]></content>
      <tags>
        <tag>机器学习</tag>
      </tags>
  </entry>
</search>
